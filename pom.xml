<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<groupId>eu.openaire</groupId>
	<artifactId>guidelines-cris-managers</artifactId>
	<version>1.1.0-SNAPSHOT</version>
	<packaging>pom</packaging>

	<build>
		<plugins>
			<plugin>
				<groupId>org.codehaus.mojo</groupId>
				<artifactId>xml-maven-plugin</artifactId>
				<version>1.0.1</version>
				<executions>
					<execution>
						<goals>
							<goal>validate</goal>
							<goal>transform</goal>
						</goals>
					</execution>
				</executions>
				<configuration>
                    <forceCreation>true</forceCreation>
					<validationSets>
						<validationSet>
							<dir>samples</dir>
							<validating>true</validating>
                            <excludes>
                                <exclude>_schematron_output/**/*.xml</exclude>
                            </excludes>
						</validationSet>
						<validationSet>
							<dir>schemas</dir>
							<validating>true</validating>
							<excludes>
								<exclude>**/catalog.xml</exclude>
								<exclude>**/*.out.xml</exclude>
								<exclude>**/*.txt</exclude>
                                <exclude>**/*.sch</exclude>
                                <exclude>**/*.xslt</exclude>
								<exclude>scripts/*</exclude>
								<exclude>cached/*</exclude>
							</excludes>
						</validationSet>
					</validationSets>
					<transformationSets>
						<transformationSet>
							<dir>schemas</dir>
							<includes>
								<include>openaire-cerif-profile.xsd</include>
							</includes>
							<outputDir>docs/_build</outputDir>
							<stylesheet>schemas/scripts/xsd2cerif-rst.xsl</stylesheet>
						</transformationSet>
                        <transformationSet>
                            <dir>schemas</dir>
                            <includes>
                                <include>openaire-cerif-profile.xsd</include>
                            </includes>
                            <outputDir>schemas/schematron</outputDir>
                            <stylesheet>tools/schematron/trunk/converters/code/ToSchematron/ExtractSchFromXSD-2.xsl</stylesheet>
                            <fileMappers>
                                <fileMapper implementation="org.codehaus.plexus.components.io.filemappers.FileExtensionMapper">
                                    <targetExtension>.sch</targetExtension>
                                </fileMapper>
                            </fileMappers>
                        </transformationSet>
                        <transformationSet>
                            <dir>schemas/schematron</dir>
                            <includes>
                                <include>openaire-cerif-profile.sch</include>
                            </includes>
                            <outputDir>schemas/schematron</outputDir>
                            <stylesheet>tools/schematron/trunk/schematron/code/iso_svrl_for_xslt2.xsl</stylesheet>
                            <fileMappers>
                                <fileMapper implementation="org.codehaus.plexus.components.io.filemappers.FileExtensionMapper">
                                    <targetExtension>validate.xslt</targetExtension>
                                </fileMapper>
                            </fileMappers>
                        </transformationSet>
                        <transformationSet>
                            <dir>samples</dir>
                            <includes>
                                <include>*.xml</include>
                            </includes>
                            <outputDir>samples/_schematron_output</outputDir>
                            <stylesheet>schemas/schematron/openaire-cerif-profile.validate.xslt</stylesheet>
                            <fileMappers>
                                <fileMapper implementation="org.codehaus.plexus.components.io.filemappers.FileExtensionMapper">
                                    <targetExtension>validation-report.xml</targetExtension>
                                </fileMapper>
                            </fileMappers>
                        </transformationSet>
					</transformationSets>
					<catalogs>
						<catalog>schemas/catalog.xml</catalog>
					</catalogs>
				</configuration>
				<dependencies>
					<dependency>
						<groupId>net.sf.saxon</groupId>
						<artifactId>Saxon-HE</artifactId>
						<version>9.8.0-12</version>
					</dependency>
				</dependencies>
			</plugin>
		</plugins>
	</build>
</project>